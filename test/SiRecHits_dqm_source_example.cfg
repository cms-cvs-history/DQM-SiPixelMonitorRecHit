process SiPixelMonitorRecHitsProcess = {

untracked PSet maxEvents = {untracked int32 input = -1}

   	source = PoolSource {
        # From CASTOR
	untracked vstring fileNames = 
	#{'rfio:/castor/cern.ch/user/c/chiochia/cmssw/Muon_FullValidation_150pre3.root'}
	{'/store/relval/2008/6/6/RelVal-RelValTTbar-1212531852-IDEAL_V1-2nd-02/0000/081018D5-EC33-DD11-A623-000423D6CA42.root'}

	# Local file
	# untracked vstring fileNames = {'file:digis.root'}
	#

        untracked uint32 debugVebosity = 10
        untracked bool   debugFlag     = true
 
    	}

	#initialize magnetic field
	include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

	# Tracker SimGeometryXML
  	#include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"
	
  	# Tracker Geometry Builder
  	include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

  	# Tracker Numbering Builder
  	include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

	# Pixel RecHit Monitoring
	include "DQM/SiPixelMonitorRecHit/data/SiPixelMonitorRecHit.cfi"
	replace SiPixelRecHitSource.saveFile = true   
	replace SiPixelRecHitSource.modOn = false 
	replace SiPixelRecHitSource.ladOn = true       
	replace SiPixelRecHitSource.layOn = true  
	replace SiPixelRecHitSource.phiOn = true  
	replace SiPixelRecHitSource.bladeOn = true  
	replace SiPixelRecHitSource.ringOn = true  
	replace SiPixelRecHitSource.diskOn = true  

  # DQM services
    include "DQMServices/Core/data/DQM.cfg"    
 #   replace DQMStore.referenceFileName = "Reference.root"
    replace DQM.collectorHost = ""
      
    include "DQMServices/Components/data/DQMEnvironment.cfi"
    replace dqmSaver.convention    = "Online"
    replace dqmSaver.producer        = "DQM"
    replace dqmEnv.subSystemFolder   = "Pixel"
    # replace dqmSaver.forceRunNumber  = -1
    replace dqmSaver.saveByLumiSection =  1
    # replace dqmSaver.saveByMinute = -1
    # replace dqmSaver.saveByEvent =  -1
    replace dqmSaver.saveByRun =     1
    replace dqmSaver.saveAtJobEnd = true

    module qTester = QualityTester {
      untracked FileInPath qtList = "DQM/SiPixelMonitorClient/test/sipixel_qualitytest_config.xml"
      untracked bool getQualityTestsFromFile = true
      untracked int32 QualityTestPrescaler = 1
    }

  #=========================================================================================

   service = ModuleWebRegistry { }
   service = LockService { untracked vstring labels = { "source" } }

   include "Configuration/StandardSequences/data/Reconstruction.cff"
   #include "Validation/Performance/test/FakeConditions.cff"
   include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff" 
    replace GlobalTag.globaltag = "IDEAL_V1::All"
       path p1 = {siPixelRecHits, SiPixelRecHitSource}

}
